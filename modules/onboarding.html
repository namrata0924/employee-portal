<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onboarding - Employee Lifecycle Management</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/onboarding.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
</head>

<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <div class="mobile-header">
            <button class="hamburger" id="hamburgerBtn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <div id="sidebar-container"></div>
        <main class="main-content">
            <div class="module-container">
                <h2>Employee Onboarding</h2>
                <br />
                <!-- Stage Progress Bar -->
                <div class="stage-progress">
                    <div class="stage-indicators">
                        <div class="stage-indicator active" data-stage="1">
                            <div class="stage-number">1</div>
                            <span>Induction</span>
                        </div>
                        <div class="stage-indicator" data-stage="2">
                            <div class="stage-number">2</div>
                            <span>Forms</span>
                        </div>
                        <div class="stage-indicator" data-stage="3">
                            <div class="stage-number">3</div>
                            <span>Training</span>
                        </div>
                        <div class="stage-indicator" data-stage="4">
                            <div class="stage-number">4</div>
                            <span>Process Documents</span>
                        </div>
                        <div class="stage-indicator" data-stage="5">
                            <div class="stage-number">5</div>
                            <span>Completion</span>
                        </div>
                        <div class="stage-indicator" data-stage="6">
                            <div class="stage-number">6</div>
                            <span>Access Provisioning</span>
                        </div>
                        <div class="stage-indicator" data-stage="7">
                            <div class="stage-number">7</div>
                            <span>SSO Integration</span>
                        </div>
                    </div>
                    <div class="stage-progress-bar">
                        <div class="progress" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Stages Container -->
                <div class="stages-container">
                    <!-- Stage 1: Induction -->
                    <div class="stage active" data-stage="1">
                        <div class="stage-header">
                            <h3>Stage 1: Induction</h3>
                            <span class="stage-status">In Progress</span>
                        </div>
                        <div class="steps">
                            <!-- Step 1.1 -->

                            <div class="step" data-step="1">
                                <div class="step-header">
                                    <div class="step-number">1.1</div>
                                    <h4>Company Overview Video</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <div class="video-trigger-container">
                                        <button class="btn btn-primary open-video-btn"
                                            data-video-url="../assets/video.mp4" data-step="1.1">
                                            Watch Video
                                        </button>
                                    </div>
                                    <div class="completion-status">
                                        <label>
                                            <input type="checkbox" class="completion-checkbox" data-step="1.1"
                                                disabled />
                                            I have watched the complete video
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Modal -->
                            <div id="videoModal" class="modal">
                                <div class="modal-content">
                                    <span id="videoCloseBtn" class="close">&times;</span>
                                    <video id="videoPlayer" class="plyr" controls width="100%" height="400"></video>
                                </div>
                            </div>



                            <!-- Step 1.2 -->
                            <div class="step" data-step="2">
                                <div class="step-header">
                                    <div class="step-number">1.2</div>
                                    <h4>Company Policies Document</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <div class="document-viewer pdf-center">

                                        <!-- Multiple PDF buttons under same step -->
                                        <button class="btn btn-primary openPdfBtn" data-pdf="../assets/sample.pdf"
                                            data-pdfid="policy1" data-step="1.2">
                                            <i class="fas fa-file-pdf"></i> View Policy 1
                                        </button>

                                        <button class="btn btn-primary openPdfBtn" data-pdf="../assets/bd.pdf"
                                            data-pdfid="policy2" data-step="1.2">
                                            <i class="fas fa-file-pdf"></i> View Policy 2
                                        </button>

                                        <button class="btn btn-primary openPdfBtn" data-pdf="../assets/sample.pdf"
                                            data-pdfid="policy3" data-step="1.2">
                                            <i class="fas fa-file-pdf"></i> View Policy 3
                                        </button>

                                    </div>
                                    <div class="completion-status">
                                        <label>
                                            <input type="checkbox" class="completion-checkbox" data-step="1.2">
                                            I have read and understood the company policies
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Modal -->
                            <div id="pdfModal" class="modal" style="display:none;">
                                <div class="modal-content">
                                    <span class="close">&times;</span>
                                    <iframe id="pdfViewer" src="" width="100%" height="500px"></iframe>
                                </div>
                            </div>



                            <!-- Step 1.3 -->
                            <div class="step" data-step="3">
                                <div class="step-header">
                                    <div class="step-number">1.3</div>
                                    <h4>Employee Handbook-HR</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <div class="document-viewer pdf-center">

                                        <!-- Multiple PDF buttons under same step -->
                                        <button class="btn btn-primary openPdfBtn" data-pdf="../assets/sample.pdf"
                                            data-pdfid="policy1" data-step="1.2">
                                            <i class="fas fa-file-pdf"></i> Employee Handbook-HR
                                        </button>

                                        <button class="btn btn-primary openPdfBtn" data-pdf="../assets/bd.pdf"
                                            data-pdfid="policy2" data-step="1.2">
                                            <i class="fas fa-file-pdf"></i> View Policy 2
                                        </button>



                                    </div>
                                    <div class="completion-status">
                                        <label>
                                            <input type="checkbox" class="completion-checkbox" data-step="1.2">
                                            I have read and understood the employee handbook
                                        </label>
                                    </div>
                                </div>
                            </div>



                        </div>
                        <div class="navigation-buttons">
                            <button class="btn-prev" onclick="onboardingModule.previousStage()">
                                <i class="fas fa-arrow-left"></i>
                                Previous
                            </button>
                            <button class="btn-next" onclick="onboardingModule.nextStage()">
                                Next
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>

                    </div>


                    <!-- Stage 2: Forms -->
                    <div class="stage" data-stage="2">
                        <div class="stage-header">
                            <h3>Stage 2: Forms</h3>
                            <span class="stage-status">Locked</span>
                        </div>
                        <div class="steps stage-2-form">
                            <!-- Step 2.1 -->
                            <div class="step" data-step="4">
                                <div class="step-header">
                                    <div class="step-number">2.1</div>
                                    <h4>Personal Information Form</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <form id="personal-info-form" class="onboarding-form">
                                        <div class="form-section">
                                            <h5 class="form-section-title">Basic Information</h5>
                                            <div class="form-row">
                                                <div class="form-group required">
                                                    <label for="consultantId">Consultant ID</label>
                                                    <input type="text" id="consultantId" name="consultantId" required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="sex">Sex</label>
                                                    <select id="sex" name="sex" required>
                                                        <option value="">Select Gender</option>
                                                        <option value="male">Male</option>
                                                        <option value="female">Female</option>
                                                    </select>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="dateOfJoining">Date of Joining</label>
                                                    <input type="date" id="dateOfJoining" name="dateOfJoining" required>
                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group required">
                                                    <label for="consultantName">Name of Consultant</label>
                                                    <input type="text" id="consultantName" name="consultantName"
                                                        required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="dateOfBirth">Date of Birth</label>
                                                    <input type="date" id="dateOfBirth" name="dateOfBirth" required>
                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group required">
                                                    <label for="maritalStatus">Marital Status</label>
                                                    <select id="maritalStatus" name="maritalStatus" required>
                                                        <option value="">Select Status</option>
                                                        <option value="single">Single</option>
                                                        <option value="married">Married</option>
                                                        <option value="divorced">Divorced</option>
                                                        <option value="widowed">Widowed</option>
                                                    </select>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="bloodGroup">Blood Group</label>
                                                    <select id="bloodGroup" name="bloodGroup" required>
                                                        <option value="">Select Blood Group</option>
                                                        <option value="A+">A+</option>
                                                        <option value="A-">A-</option>
                                                        <option value="B+">B+</option>
                                                        <option value="B-">B-</option>
                                                        <option value="O+">O+</option>
                                                        <option value="O-">O-</option>
                                                        <option value="AB+">AB+</option>
                                                        <option value="AB-">AB-</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Current Address Section -->
                                        <div class="form-section">
                                            <h5 class="form-section-title">Current Address</h5>
                                            <div class="form-group required">
                                                <label for="currentAddress">Address</label>
                                                <textarea id="currentAddress" name="currentAddress" rows="3"
                                                    required></textarea>
                                            </div>
                                            <div class="form-row">
                                                <div class="form-group required">
                                                    <label for="currentState">State</label>
                                                    <input type="text" id="currentState" name="currentState" required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="currentCity">City</label>
                                                    <input type="text" id="currentCity" name="currentCity" required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="currentPincode">Pin-code</label>
                                                    <input type="text" id="currentPincode" name="currentPincode"
                                                        pattern="[0-9]{6}" title="Please enter a valid 6-digit pincode"
                                                        required>
                                                </div>
                                            </div>
                                            <div class="form-group checkbox-group">
                                                <label>
                                                    <input type="checkbox" id="sameAsCurrent" name="sameAsCurrent">
                                                    Permanent Address same as Current Address
                                                </label>
                                            </div>
                                        </div>

                                        <!-- Permanent Address Section -->
                                        <div class="form-section" id="permanentAddressSection">
                                            <h5 class="form-section-title">Permanent Address</h5>
                                            <div class="form-group required">
                                                <label for="permanentAddress">Address</label>
                                                <textarea id="permanentAddress" name="permanentAddress" rows="3"
                                                    required></textarea>
                                            </div>
                                            <div class="form-row">
                                                <div class="form-group required">
                                                    <label for="permanentState">State</label>
                                                    <input type="text" id="permanentState" name="permanentState"
                                                        required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="permanentCity">City</label>
                                                    <input type="text" id="permanentCity" name="permanentCity" required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="permanentPincode">Pin-code</label>
                                                    <input type="text" id="permanentPincode" name="permanentPincode"
                                                        pattern="[0-9]{6}" title="Please enter a valid 6-digit pincode"
                                                        required>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-section">
                                            <h5 class="form-section-title">Contact Information</h5>
                                            <div class="form-row">
                                                <div class="form-group required">
                                                    <label for="email">Email ID</label>
                                                    <input type="email" id="email" name="email" required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="panCard">PAN Card No</label>
                                                    <input type="text" id="panCard" name="panCard"
                                                        pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}"
                                                        title="Please enter a valid PAN number" required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="aadhar">Aadhar No</label>
                                                    <input type="text" id="aadhar" name="aadhar" pattern="[0-9]{12}"
                                                        title="Please enter a valid 12-digit Aadhar number" required>
                                                </div>
                                            </div>

                                            <div class="form-row">
                                                <div class="form-group required">
                                                    <label for="mobile">Mobile Number</label>
                                                    <input type="tel" id="mobile" name="mobile" pattern="[0-9]{10}"
                                                        title="Please enter a valid 10-digit mobile number" required>
                                                </div>
                                                <div class="form-group required">
                                                    <label for="emergencyContact">Emergency Contact No &
                                                        Relations</label>
                                                    <input type="text" id="emergencyContact" name="emergencyContact"
                                                        required>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-actions">
                                            <button type="button" class="btn-cancel">Cancel</button>
                                            <button type="submit" class="btn-save">Save Information</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- Step 2.2 -->
                            <div class="step" data-step="5">
                                <div class="step-header">
                                    <div class="step-number">2.2</div>
                                    <h4>Family Members Details</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <form id="family-info-form" class="onboarding-form">
                                        <div class="family-members">
                                            <!-- Father Information -->
                                            <div class="family-member-section">
                                                <h5>Father</h5>
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label for="fatherName">Name</label>
                                                        <input type="text" id="fatherName" name="fatherName" required>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="fatherDOB">Date of Birth</label>
                                                        <input type="date" id="fatherDOB" name="fatherDOB" required>
                                                    </div>
                                                    <div class="form-group checkbox-group">
                                                        <label>
                                                            <input type="checkbox" id="fatherResiding"
                                                                name="fatherResiding">
                                                            Residing with Self
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Mother Information -->
                                            <div class="family-member-section">
                                                <h5>Mother</h5>
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label for="motherName">Name</label>
                                                        <input type="text" id="motherName" name="motherName" required>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="motherDOB">Date of Birth</label>
                                                        <input type="date" id="motherDOB" name="motherDOB" required>
                                                    </div>
                                                    <div class="form-group checkbox-group">
                                                        <label>
                                                            <input type="checkbox" id="motherResiding"
                                                                name="motherResiding">
                                                            Residing with Self
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Spouse Information -->
                                            <div class="family-member-section">
                                                <h5>Spouse</h5>
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label for="spouseName">Name</label>
                                                        <input type="text" id="spouseName" name="spouseName">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="spouseDOB">Date of Birth</label>
                                                        <input type="date" id="spouseDOB" name="spouseDOB">
                                                    </div>
                                                    <div class="form-group checkbox-group">
                                                        <label>
                                                            <input type="checkbox" id="spouseResiding"
                                                                name="spouseResiding">
                                                            Residing with Self
                                                        </label>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn-remove-family-member"
                                                    style="margin-top: 10px; background-color: var(--warning-color); color: var(--text-dark); border: none; padding: 0.5rem 1rem; border-radius: var(--border-radius); cursor: pointer;">Remove
                                                    Spouse</button>
                                            </div>

                                            <!-- Children Information -->
                                            <div class="family-member-section">
                                                <h5>Son/Daughter 1</h5>
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label for="child1Name">Name</label>
                                                        <input type="text" id="child1Name" name="child1Name">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="child1DOB">Date of Birth</label>
                                                        <input type="date" id="child1DOB" name="child1DOB">
                                                    </div>
                                                    <div class="form-group checkbox-group">
                                                        <label>
                                                            <input type="checkbox" id="child1Residing"
                                                                name="child1Residing">
                                                            Residing with Self
                                                        </label>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn-remove-family-member"
                                                    style="margin-top: 10px; background-color: var(--warning-color); color: var(--text-dark); border: none; padding: 0.5rem 1rem; border-radius: var(--border-radius); cursor: pointer;">Remove
                                                    Child 1</button>
                                            </div>

                                            <div class="family-member-section">
                                                <h5>Son/Daughter 2</h5>
                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label for="child2Name">Name</label>
                                                        <input type="text" id="child2Name" name="child2Name">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="child2DOB">Date of Birth</label>
                                                        <input type="date" id="child2DOB" name="child2DOB">
                                                    </div>
                                                    <div class="form-group checkbox-group">
                                                        <label>
                                                            <input type="checkbox" id="child2Residing"
                                                                name="child2Residing">
                                                            Residing with Self
                                                        </label>
                                                    </div>
                                                </div>
                                                <button type="button" class="btn-remove-family-member"
                                                    style="margin-top: 10px; background-color: var(--warning-color); color: var(--text-dark); border: none; padding: 0.5rem 1rem; border-radius: var(--border-radius); cursor: pointer;">Remove
                                                    Child 2</button>
                                            </div>
                                        </div>

                                        <div class="form-actions">
                                            <button type="submit" class="btn-primary">Save Family Information</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- Step 2.3 -->
                            <div class="step" data-step="6">
                                <div class="step-header">
                                    <div class="step-number">2.3</div>
                                    <h4>Work Experience/Profile</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <form id="work-experience-form" class="onboarding-form">
                                        <div id="work-experience-list">
                                            <!-- First Organization -->
                                            <div class="work-experience-section">
                                                <h5>Organization 1</h5>
                                                <div class="form-group">
                                                    <label for="org1Name">Organization Name</label>
                                                    <input type="text" id="org1Name" name="org1Name" required>
                                                </div>

                                                <div class="experience-details">
                                                    <div class="form-row">
                                                        <div class="form-group">
                                                            <label for="org1Designation1">Designation</label>
                                                            <input type="text" id="org1Designation1"
                                                                name="org1Designation1" required>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="org1From1">From</label>
                                                            <input type="date" id="org1From1" name="org1From1" required>
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="org1To1">To</label>
                                                            <input type="date" id="org1To1" name="org1To1" required>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-row">
                                                    <div class="form-group">
                                                        <label for="org1ContactNo">Contact No.</label>
                                                        <input type="tel" id="org1ContactNo" name="org1ContactNo"
                                                            pattern="[0-9]{10}"
                                                            title="Please enter a valid 10-digit contact number">
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label for="org1JobDescription">Job Description</label>
                                                    <textarea id="org1JobDescription" name="org1JobDescription" rows="3"
                                                        required></textarea>
                                                </div>
                                                <button type="button" class="btn-remove-organization"
                                                    style="margin-top: 10px; background-color: var(--error-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: var(--border-radius); cursor: pointer;">Remove
                                                    Organization</button>
                                            </div>
                                        </div>

                                        <button type="button" id="add-organization-btn" class="btn-primary"
                                            style="margin-top: 1.5rem; background-color: var(--success-color)">
                                            <i class="fas fa-plus"></i> Add Another Organization
                                        </button>

                                        <div class="form-actions">
                                            <button type="submit" class="btn-primary">Save Work Experience</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="navigation-buttons">
                            <button class="btn-prev" onclick="onboardingModule.previousStage()">
                                <i class="fas fa-arrow-left"></i>
                                Previous
                            </button>
                            <button class="btn-next" onclick="onboardingModule.nextStage()">
                                Next
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Stage 3: Training -->
                    <div class="stage" data-stage="3">
                        <div class="stage-header">
                            <h3>Stage 3: Training</h3>
                            <span class="stage-status">Locked</span>
                        </div>
                        <div class="steps">
                            <!-- Step 3.1 -->
                            <div class="step" data-step="7">
                                <div class="step-header">
                                    <div class="step-number">3.1</div>
                                    <h4>Safety Training</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <div class="video-container">
                                        <video controls>
                                            <source src="../assets/video.mp4" type="video/mp4">
                                        </video>
                                    </div>
                                    <div class="completion-status">
                                        <label>
                                            <input type="checkbox" class="completion-checkbox" data-step="3.1">
                                            I have completed the Safety Training
                                        </label>
                                    </div>


                                    <div class="quiz-section">
                                        <h6>Safety Training Quiz</h6>
                                        <form class="quiz-form">
                                            <!-- Quiz questions will be dynamically loaded -->
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 3.2 -->
                            <div class="step" data-step="8">
                                <div class="step-header">
                                    <div class="step-number">3.2</div>
                                    <h4>Department Training</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <div class="training-materials">
                                        <!-- Training content will be dynamically loaded based on department -->
                                    </div>
                                    <div class="completion-status">
                                        <label>
                                            <input type="checkbox" class="completion-checkbox" data-step="3.2">
                                            I have completed the Department Training
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="navigation-buttons">
                            <button class="btn-prev" onclick="onboardingModule.previousStage()">
                                <i class="fas fa-arrow-left"></i>
                                Previous
                            </button>
                            <button class="btn-next" onclick="onboardingModule.nextStage()">
                                Next
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Stage 4: Process Documents -->
                    <div class="stage" data-stage="4">
                        <div class="stage-header">
                            <h3>Stage 4: Process Documents</h3>
                            <span class="stage-status">Locked</span>
                        </div>
                        <div class="steps">
                            <div class="step" data-step="9">
                                <div class="step-header">
                                    <div class="step-number">4.1</div>
                                    <h4>Process Documentation Review</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <!-- Process documentation content -->
                                    <p>Please review the following documents:</p>
                                    <ul>
                                        <li>Document 1: <a href="../assets/sample.pdf" target="_blank">View Document</a>
                                        </li>
                                        <li>Document 2: <a href="../assets/sample.pdf" target="_blank">View Document</a>
                                        </li>
                                    </ul>
                                    <div class="completion-status">
                                        <label>
                                            <input type="checkbox" class="completion-checkbox" data-step="4.1">
                                            I have reviewed the process documentation
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="navigation-buttons">
                            <button class="btn-prev" onclick="onboardingModule.previousStage()">
                                <i class="fas fa-arrow-left"></i>
                                Previous
                            </button>
                            <button class="btn-next" onclick="onboardingModule.nextStage()">
                                Next
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Stage 5: Completion Notification -->
                    <div class="stage" data-stage="5">
                        <div class="stage-header">
                            <h3>Stage 5: Completion</h3>
                            <span class="stage-status">Locked</span>
                        </div>
                        <div class="steps">
                            <div class="step" data-step="10">
                                <div class="step-header">
                                    <div class="step-number">5.1</div>
                                    <h4>Completion Review</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <div class="completion-summary">
                                        <!-- Summary will be dynamically generated -->
                                    </div>
                                </div>
                                <div class="completion-status">
                                    <label>
                                        <input type="checkbox" class="completion-checkbox" data-step="4.1">
                                        I have read the completion summary
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="navigation-buttons">
                            <button class="btn-prev" onclick="onboardingModule.previousStage()">
                                <i class="fas fa-arrow-left"></i>
                                Previous
                            </button>
                            <button class="btn-next" onclick="onboardingModule.nextStage()">
                                Next
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Stage 6: Access Provisioning -->
                    <div class="stage" data-stage="6">
                        <div class="stage-header">
                            <h3>Stage 6: Access Provisioning</h3>
                            <span class="stage-status">Locked</span>
                        </div>
                        <div class="steps">
                            <div class="step" data-step="11">
                                <div class="step-header">
                                    <div class="step-number">6.1</div>
                                    <h4>Department Head Consultation</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <!-- Access provisioning content -->
                                </div>
                                <div class="completion-status">
                                    <label>
                                        <input type="checkbox" class="completion-checkbox" data-step="4.1">
                                        I have reviewed all things
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="navigation-buttons">
                            <button class="btn-prev" onclick="onboardingModule.previousStage()">
                                <i class="fas fa-arrow-left"></i>
                                Previous
                            </button>
                            <button class="btn-next" onclick="onboardingModule.nextStage()">
                                Next
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Stage 7: SSO Integration -->
                    <div class="stage" data-stage="7">
                        <div class="stage-header">
                            <h3>Stage 7: SSO Integration</h3>
                            <span class="stage-status">Locked</span>
                        </div>
                        <div class="steps">
                            <div class="step" data-step="12">
                                <div class="step-header">
                                    <div class="step-number">7.1</div>
                                    <h4>System Access Setup</h4>
                                    <div class="step-status pending">Pending</div>
                                </div>
                                <div class="step-content">
                                    <!-- SSO integration content -->
                                </div>
                            </div>
                        </div>
                        <div class="navigation-buttons">
                            <button class="btn-prev" onclick="onboardingModule.previousStage()">
                                <i class="fas fa-arrow-left"></i>
                                Previous
                            </button>
                            <button class="btn-next" onclick="onboardingModule.nextStage()">
                                Next
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>
    <!-- ✅ jQuery should come FIRST -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- ✅ Only include Bootstrap bundle (not both) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <!-- ✅ Other libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.8.162/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>


    <script src="../js/helper.js"></script>
    <script src="../js/onboarding.js"></script>
    <script src="../js/auth.js"></script>



    <script>
        $(function () {
            $("#sidebar-container").load("../sidebar.html", function () {
                // Set user email and name
                const userEmail = localStorage.getItem('employeeEmail');
                const employeeName = localStorage.getItem('employeeName') || 'Employee';

                $("#userEmail").text(userEmail || '');
                $("#welcomeName").text(employeeName);

                // Attach logout event
                const logoutBtn = document.getElementById('logoutBtn'); {
                    logoutBtn.addEventListener('click', function (e) {
                        e.preventDefault();
                        logout();
                    });
                }
            });
        });

        $(document).ready(function () {
            let currentPdfId = null;

            $('.openPdfBtn').on('click', async function () {
                const pdfUrl = $(this).data('pdf');
                const pdfId = $(this).data('pdfid');
                currentPdfId = pdfId;

                // Load PDF into iframe
                $('#pdfViewer').attr('src', pdfUrl + '#zoom=100');
                $('#pdfModal').show();

                // Start tracking time
                await captureStartTime(pdfId, this, pdfUrl);
            });

            // Example: Close PDF viewer (you can trigger this from a close button)
            $('.close').on('click', async function () {
                if (!currentPdfId) return;

                const allowClose = await checkReadingTime(currentPdfId);
                if (allowClose) {
                    await captureStopTime(currentPdfId);
                    $('#pdfModal').hide();
                    currentPdfId = null;
                }
            });
        });


        $(document).on('click', '.open-video-btn', function () {
            const videoUrl = $(this).data('video-url');

            openTrackedVideoModal({
                videoUrl: videoUrl,
                modalId: 'videoModal',
                videoElementId: 'videoPlayer',
                closeBtnId: 'videoCloseBtn',
                onComplete: function () {
                    console.log('User watched required video duration.');
                    // You can trigger AJAX, navigation, or marking completion here
                }
            });
        });
    </script>


</body>

</html>